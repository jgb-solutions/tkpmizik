{"version":3,"sources":["app.js","ng-search.js","ng-upload.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["function views_play_download_count() {\n\t$spanView = $('span.views_count');\n\t$spanPlay = $('span.play_count');\n\t$spanDownload = $('span.download_count');\n\n\tparam = {\n\t\tid: $spanView.data('id'),\n\t\tobj: $spanView.data('obj'),\n\t\tfn: 'vpd_count',\n\t};\n\n\tif ( param.id !== undefined ) {\n\t\t$.post('/api/ajax', param, function( data )\n\t\t{\n\t\t\t$spanView.text( data.views );\n\t\t\tif ( data.play !== '' ) $spanPlay.text( data.play );\n\t\t\t$spanDownload.text( data.download );\n\t\t});\n\t}\n}\n\n// function vote() {\n// \t$voteBtn = $('#vote-btn');\n\n// \t$voteBtn.find('button').on('click', function() {\n// \t\t$this = $(this);\n\n// \t\t// $this.toggleClass('btn-default btn-primary');\n\n// \t\t$siblings = $this.siblings('button');\n\n// \t    if ( $siblings.attr('disabled') )\n// \t    {\n// \t        $siblings.removeAttr('disabled');\n// \t    } else\n// \t    {\n// \t        $siblings.attr('disabled', 'disabled');\n// \t    }\n// \t});\n\n// \t$voteBtn.find('#voteUp').on('click', function() {\n// \t\t$this = $(this);\n\n// \t\tif ( $this.hasClass('btn-default') ) {\n// \t\t\tvoteUp();\n// \t\t} else {\n// \t\t\tvoteNull('up');\n// \t\t}\n\n// \t\t$this.toggleClass('btn-default btn-success');\n// \t});\n\n// \t$voteBtn.find('#voteDown').on('click', function() {\n// \t\t$this = $(this);\n\n// \t\tif ( $this.hasClass('btn-default') ) {\n// \t\t\tvoteDown();\n// \t\t} else {\n// \t\t\tvoteNull('down');\n// \t\t}\n\n// \t\t$this.toggleClass('btn-default btn-danger');\n// \t});\n// }\n\n// function voteUp() {\n// \t// console.log('Vote up dude');\n// \t$spanView = $('span.views_count');\n// \t$voteUpNum = $('#vote-up-num');\n// \t$voteDownNum = $('#vote-down-num');\n\n// \tparam = {\n// \t\tid: $spanView.data('id'),\n// \t\tfn: 'vote',\n// \t\tud: 'up',\n// \t\tobj: $spanView.data('obj')\n// \t};\n\n// \t$.post('/api/ajax', param, function( data ) {\n// \t\t// console.log( data );\n\n// \t\tif ( data.vote_down !== 0 ) {\n// \t\t\t$voteDownNum.empty().html( data.vote_down );\n// \t\t}\n\n// \t\tif ( data.vote_up !== 0 )\n// \t\t{\n// \t\t\t$voteUpNum.empty().html( data.vote_up );\n// \t\t} else {\n// \t\t\t$voteUpNum.empty();\n// \t\t}\n// \t});\n// }\n\n// function voteDown() {\n// \t// console.log('Vote Down dude');\n// \t$spanView = $('span.views_count');\n// \t$voteUpNum = $('#vote-up-num');\n// \t$voteDownNum = $('#vote-down-num');\n\n// \tparam = {\n// \t\tid: $spanView.data('id'),\n// \t\tfn: 'vote',\n// \t\tud: 'down',\n// \t\tobj: $spanView.data('obj')\n// \t};\n\n// \t$.post('/api/ajax', param, function( data ) {\n// \t\tconsole.log( data );\n\n// \t\tif ( data.vote_up !== 0 ) {\n// \t\t\t$voteUpNum.empty().html( data.vote_up );\n// \t\t}\n\n// \t\tif ( data.vote_down !== 0 ) {\n// \t\t\t$voteDownNum.empty().html( data.vote_down );\n// \t\t} else {\n// \t\t\t$voteDownNum.empty();\n// \t\t}\n// \t});\n// }\n\n// function voteNull( ud ) {\n// \t// console.log('voting null');\n\n// \t$spanView = $('span.views_count');\n// \t$voteUpNum = $('#vote-up-num');\n// \t$voteDownNum = $('#vote-down-num');\n\n// \tparam = {\n// \t\tid: $spanView.data('id'),\n// \t\tfn: 'vote',\n// \t\tud: 'null',\n// \t\tobj: $spanView.data('obj'),\n// \t\taction: ud\n// \t};\n\n// \t$.post('/api/ajax', param, function( data ) {\n// \t\t// console.log( data );\n\n// \t\t$voteUpNum.empty();\n\n// \t\tif ( data.vote_up !== 0 ) {\n// \t\t\t$voteUpNum.html( data.vote_up );\n// \t\t}\n\n// \t\t$voteDownNum.empty();\n\n// \t\tif ( data.vote_down !== 0 ) {\n// \t\t\t$voteDownNum.html( data.vote_down );\n// \t\t}\n// \t});\n// }\n\nfunction slideAlert() {\n\tvar alert = $('.alert-info, .alert-success');\n\n\talert.delay(5000).slideUp();\n}\n\n$(function() {\n\t$.ajaxSetup({\n\t\theaders: {\n         'X-CSRF-TOKEN': $('meta#token').data('token')\n      }\n\t});\n\n\t/********** Views Count, Play Count & Download Count ********/\n\tviews_play_download_count();\n\n\t// vote();\n\n\t/********* Confirmation on file deletion **********/\n\t$('input[name=del]').on('click', function() {\n\t\t$(this).siblings('small').toggleClass('hide');\n\t});\n\n\tslideAlert();\n\n\t$('a.downloadButton').on('click', function(e) {\n\t\t$this = $(this);\n\n\t\tif ($this.attr('disabled') == 'disabled') {\n\t\t\te.preventDefault();\n\t\t} else {\n\t\t\t$this.attr('disabled', 'disabled');\n\t\t}\n\t});\n\n\t$fakecropped = $('.fakecrop-fill img');\n\t$fakecropped.height($fakecropped.width());\n});\n\n/* AngularJS code */\nangular.module('app', [\n\t'ngFileUpload',\n\t'ngAnimate',\n\t'chieffancypants.loadingBar'\n])\n\n.config(['$httpProvider', 'cfpLoadingBarProvider',\n\tfunction($httpProvider, cfpLoadingBarProvider) {\n\t// configuring the loading bar\n\tcfpLoadingBarProvider.includeSpinner = true;\n\n\t$httpProvider.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\n}]);\n\n/* Snow */\nsnowStorm.flakesMaxActive = 96;    // show more snow on screen at once\nsnowStorm.useTwinkleEffect = true;\n// snowStorm.showCharacter = '&#x266B'; //\"â™«\";\nsnowStorm.snowStick = true;\nsnowStorm.useMeltEffect = true;\n","angular.module('app')\n\n.controller('searchController', ['$scope', '$http', function($scope, $http) {\n\t$scope.results = [];\n\t$scope.type = '';\n\t$scope.noResults = false;\n\n\t$scope.noResultsText = function() {\n\t\treturn 'Pa gen rezilta pou \"' + $scope.searchTerm + '\"';\n\t};\n\n\t$scope.search = function( withType ) {\n\t\tif ( $scope.searchTerm.length > 2 ) {\n\t\t\t$scope.loading = true;\n\t\t\t$scope.noResults = false;\n\n\t\t\t$http.get('/cheche?q=' + $scope.searchTerm + '&type=' + $scope.type)\n\t\t\t\t.then(function( response ) {\n\t\t\t\t\tvar data = [];\n\n\t\t\t\t\t// console.log( response );\n\n\t\t\t\t\tdata = ( withType ) ? response.data.data : response.data;\n\n\t\t\t\t\tif ( data.length ) {\n\t\t\t\t\t\t$scope.results = data;\n\t\t\t\t\t\t$scope.loading = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$scope.results = [];\n\t\t\t\t\t\t$scope.noResults = true;\n\t\t\t\t\t\t$scope.loading = false;\n\t\t\t\t\t}\n\t\t\t\t}, function( error ) {\n\t\t\t\t\tconsole.log( error );\n\t\t\t\t});\n\t\t} else {\n\t\t\t$scope.results = [];\n\t\t\t$scope.noResults = false;\n\t\t}\n\n\t\t$scope.setType = function( type ) {\n\t\t\tvar withType = type.length ? true : false;\n\n\t\t\t$scope.type = type;\n\t\t\t$scope.search( withType );\n\t\t};\n\t};\n}]);","angular.module('app')\n\n.controller('UploadController', ['$scope', 'Upload', '$http',\nfunction ($scope, Upload, $http) {\n\t$scope.data = {\n\t\tdescription: ''\n\t};\n\n\t$scope.pbWidth = 0;\n\n\t$scope.showUploadFormAndReset = function() {\n\t\t$scope.uploading = false;\n\t\t$scope.uploadSuccess = false;\n\n\t\tvar category = $scope.data.category;\n\t\t$scope.data = {\n\t\t\tcategory: category,\n\t\t\tdescription: ''\n\t\t};\n\t};\n\n\t$scope.showUploadForm = function() {\n\t\t$scope.uploading = false;\n\t\t$scope.tryAgain = false;\n\t\t$scope.showPB = false;\n\t\t$scope.showErrors = false;\n\t};\n\n\t$scope.uploadMusic = function() {\n\t\tconsole.log($scope.data);\n\n\t\t$scope.upload($scope.data);\n\t};\n\n\t$scope.emailAndTweet = function(data) {\n\t\t$http.post(data.emailAndTweetUrl, {id: data.id})\n\t\t\t.then(function(response) {\n\t\t\t\tconsole.log(response);\n\t\t\t\t$scope.emailedAndTweeted = true;\n\t\t\t}, function(error) {\n\t\t\t\tconsole.log(error);\n\t\t\t});\n\t};\n\n\t$scope.upload = function (image, music) {\n\t\t$scope.uploading = true;\n\t\t$scope.uploadSuccess = false;\n\t\t$scope.tryAgain = false;\n\n\t\tUpload.upload({\n\t\t\turl: window.location.href,\n\t\t\tdata: $scope.data\n\t\t})\n\t\t.then(function (response) {\n\t\t\t\tconsole.log(response.data);\n\t\t\t\t// window.location.href = response.data.url;\n\t\t\t\t$scope.tryAgain = false;\n\t\t\t\t$scope.uploadSuccess = true;\n\t\t\t\t$scope.uploadedMusic = response.data;\n\t\t\t\tif (! response.data.emailedAndTweeted) {\n\t\t\t\t\t$scope.emailAndTweet(response.data);\n\t\t\t\t} else {\n\t\t\t\t\t$scope.emailedAndTweeted = true;\n\t\t\t\t\tconsole.log('Already posted fam.');\n\t\t\t\t}\n\t\t\t}, function (response) {\n\t\t\t\tconsole.log(response.data);\n\t\t\t\t$scope.errors = response.data;\n\t\t\t\t$scope.showErrors = true;\n\t\t\t\t$scope.tryAgain = true;\n\t\t\t}, function (evt) {\n\t\t\t\t$scope.showPB = true;\n\t\t\t\t$scope.pbWidth = parseInt(100.0 * evt.loaded / evt.total);\n\t\t\t\tconsole.log('progress: ' + $scope.pbWidth + '% ');\n\t\t\t}\n\t\t);\n\t};\n}]);"]}