function views_play_download_count(){$spanView=$("span.views_count"),$spanPlay=$("span.play_count"),$spanDownload=$("span.download_count"),param={id:$spanView.data("id"),obj:$spanView.data("obj"),fn:"vpd_count"},void 0!==param.id&&$.post("/api/ajax",param,function(a){$spanView.text(a.views),""!==a.play&&$spanPlay.text(a.play),$spanDownload.text(a.download)})}function slideAlert(){var a=$(".alert-info, .alert-success");a.delay(5e3).slideUp()}$(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$("meta#token").data("token")}}),views_play_download_count(),$("input[name=del]").on("click",function(){$(this).siblings("small").toggleClass("hide")}),slideAlert(),$("a.downloadButton").on("click",function(a){$this=$(this),"disabled"==$this.attr("disabled")?a.preventDefault():$this.attr("disabled","disabled")}),$fakecropped=$(".fakecrop-fill img"),$fakecropped.height($fakecropped.width())}),angular.module("app",["ngFileUpload","ngAnimate","chieffancypants.loadingBar"]).config(["$httpProvider","cfpLoadingBarProvider",function(a,e){e.includeSpinner=!0,a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]),snowStorm.flakesMaxActive=96,snowStorm.useTwinkleEffect=!0,snowStorm.snowStick=!0,snowStorm.useMeltEffect=!0,angular.module("app").controller("searchController",["$scope","$http",function(a,e){a.results=[],a.type="",a.noResults=!1,a.noResultsText=function(){return'Pa gen rezilta pou "'+a.searchTerm+'"'},a.search=function(t){a.searchTerm.length>2?(a.loading=!0,a.noResults=!1,e.get("/cheche?q="+a.searchTerm+"&type="+a.type).then(function(e){var n=[];n=t?e.data.data:e.data,n.length?(a.results=n,a.loading=!1):(a.results=[],a.noResults=!0,a.loading=!1)},function(a){})):(a.results=[],a.noResults=!1),a.setType=function(e){var t=!!e.length;a.type=e,a.search(t)}}}]),angular.module("app").controller("UploadController",["$scope","Upload","$http",function(a,e,t){a.data={description:""},a.pbWidth=0,a.showUploadFormAndReset=function(){a.uploading=!1,a.uploadSuccess=!1;var e=a.data.category;a.data={category:e,description:""}},a.showUploadForm=function(){a.uploading=!1,a.tryAgain=!1,a.showPB=!1,a.showErrors=!1},a.uploadMusic=function(){a.upload(a.data)},a.emailAndTweet=function(e){t.post(e.emailAndTweetUrl,{id:e.id}).then(function(e){a.emailedAndTweeted=!0},function(a){})},a.upload=function(t,n){a.uploading=!0,a.uploadSuccess=!1,a.tryAgain=!1,e.upload({url:window.location.href,data:a.data}).then(function(e){a.tryAgain=!1,a.uploadSuccess=!0,a.uploadedMusic=e.data,e.data.emailedAndTweeted?a.emailedAndTweeted=!0:a.emailAndTweet(e.data)},function(e){a.errors=e.data,a.showErrors=!0,a.tryAgain=!0},function(e){a.showPB=!0,a.pbWidth=parseInt(100*e.loaded/e.total)})}}]);