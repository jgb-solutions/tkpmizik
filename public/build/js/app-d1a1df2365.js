function views_play_download_count(){$spanView=$("span.views_count"),$spanPlay=$("span.play_count"),$spanDownload=$("span.download_count"),param={id:$spanView.data("id"),obj:$spanView.data("obj"),fn:"vpd_count"},void 0!==param.id&&$.post("/api/ajax",param,function(t){$spanView.text(t.views),""!==t.play&&$spanPlay.text(t.play),$spanDownload.text(t.download)})}function vote(){$voteBtn=$("#vote-btn"),$voteBtn.find("button").on("click",function(){$this=$(this),$siblings=$this.siblings("button"),$siblings.attr("disabled")?$siblings.removeAttr("disabled"):$siblings.attr("disabled","disabled")}),$voteBtn.find("#voteUp").on("click",function(){$this=$(this),$this.hasClass("btn-default")?voteUp():voteNull("up"),$this.toggleClass("btn-default btn-success")}),$voteBtn.find("#voteDown").on("click",function(){$this=$(this),$this.hasClass("btn-default")?voteDown():voteNull("down"),$this.toggleClass("btn-default btn-danger")})}function voteUp(){$spanView=$("span.views_count"),$voteUpNum=$("#vote-up-num"),$voteDownNum=$("#vote-down-num"),param={id:$spanView.data("id"),fn:"vote",ud:"up",obj:$spanView.data("obj")},$.post("/api/ajax",param,function(t){0!==t.vote_down&&$voteDownNum.empty().html(t.vote_down),0!==t.vote_up?$voteUpNum.empty().html(t.vote_up):$voteUpNum.empty()})}function voteDown(){$spanView=$("span.views_count"),$voteUpNum=$("#vote-up-num"),$voteDownNum=$("#vote-down-num"),param={id:$spanView.data("id"),fn:"vote",ud:"down",obj:$spanView.data("obj")},$.post("/api/ajax",param,function(t){0!==t.vote_up&&$voteUpNum.empty().html(t.vote_up),0!==t.vote_down?$voteDownNum.empty().html(t.vote_down):$voteDownNum.empty()})}function voteNull(t){$spanView=$("span.views_count"),$voteUpNum=$("#vote-up-num"),$voteDownNum=$("#vote-down-num"),param={id:$spanView.data("id"),fn:"vote",ud:"null",obj:$spanView.data("obj"),action:t},$.post("/api/ajax",param,function(t){$voteUpNum.empty(),0!==t.vote_up&&$voteUpNum.html(t.vote_up),$voteDownNum.empty(),0!==t.vote_down&&$voteDownNum.html(t.vote_down)})}function slideAlert(){var t=$(".alert-info, .alert-success");t.delay(5e3).slideUp()}$(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$("meta#token").data("token")}}),views_play_download_count(),vote(),$("input[name=del]").on("click",function(){$(this).siblings("small").toggleClass("hide")}),slideAlert(),$("a.downloadButton").on("click",function(t){$this=$(this),"disabled"==$this.attr("disabled")?t.preventDefault():$this.attr("disabled","disabled")}),$fakecropped=$(".fakecrop-fill img"),$fakecropped.height($fakecropped.width())}),angular.module("app",["ngFileUpload","ngAnimate","chieffancypants.loadingBar"]).config(["$httpProvider","cfpLoadingBarProvider",function(t,e){e.includeSpinner=!0,t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]),angular.module("app").controller("searchController",["$scope","$http",function(t,e){t.results=[],t.type="",t.noResults=!1,t.noResultsText=function(){return'Pa gen rezilta pou "'+t.searchTerm+'"'},t.search=function(o){t.searchTerm.length>2?(t.loading=!0,t.noResults=!1,e.get("/cheche?q="+t.searchTerm+"&type="+t.type).then(function(e){var n=[];n=o?e.data.data:e.data,n.length?(t.results=n,t.loading=!1):(t.results=[],t.noResults=!0,t.loading=!1)},function(t){})):(t.results=[],t.noResults=!1),t.setType=function(e){var o=!!e.length;t.type=e,t.search(o)}}}]),angular.module("app").controller("UploadController",["$scope","Upload","$http",function(t,e,o){t.data={description:""},t.pbWidth=0,t.showUploadFormAndReset=function(){t.uploading=!1,t.uploadSuccess=!1;var e=t.data.category;t.data={category:e,description:""}},t.showUploadForm=function(){t.uploading=!1,t.tryAgain=!1,t.showPB=!1,t.showErrors=!1},t.uploadMusic=function(){t.upload(t.data)},t.emailAndTweet=function(e){o.post(e.emailAndTweetUrl,{id:e.id}).then(function(e){t.emailedAndTweeted=!0},function(t){})},t.upload=function(o,n){t.uploading=!0,t.uploadSuccess=!1,t.tryAgain=!1,e.upload({url:window.location.href,data:t.data}).then(function(e){t.tryAgain=!1,t.uploadSuccess=!0,t.uploadedMusic=e.data,e.data.emailedAndTweeted?t.emailedAndTweeted=!0:t.emailAndTweet(e.data)},function(e){t.errors=e.data,t.showErrors=!0,t.tryAgain=!0},function(e){t.showPB=!0,t.pbWidth=parseInt(100*e.loaded/e.total)})}}]);